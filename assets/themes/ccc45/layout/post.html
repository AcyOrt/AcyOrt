{% extends 'layout.html' %}

{% block title %}
{{ page.title }} | {{ config.title }}
{% endblock %}

{% block content %}
<div id="post" class="center">
    <h1>{{ page.title }}</h1>
    <p><a href="{{ page.author.url }}">{{ page.author.name }}</a> Posted at {{ time(page.created, 'MMM DD, YYYY') }} . - <a href="{{ page.category.url }}">{{ page.category.name}}</a>
    </p>

    <div class="content">
        {% if page.toc %}
        <div class="toc">
            <h3>Table Of Contents</h3>
            {% autoescape false %}{{ page.toc }}{% endautoescape %}
        </div>
        {% endif %}
        {% autoescape false %}{{ page.content }}{% endautoescape %}
    </div>

    {% if page.tags.length %}
    <div class="label">
    {% for tag in page.tags %}
    <div><a href="{{ tag.url }}">#{{ tag.name }}</a></div>
    {% endfor %}
    </div>
    {% endif %}

    <div class="relate">
    {% if page.prev %}
    {% set prev = post(page.prev) %}
    <a rel="prev" href="{{ prev.url }}">← {{ prev.title }}</a>
    {% endif %}

    {% if page.next %}
    {% set next = post(page.next) %}
    <a rel="next" href="{{ next.url }}">{{ next.title }} →</a>
    {% endif %}
    </div>

    <div class="comment_list hide" id="disqus_thread"></div>
    <div id="duoshuo_thread" class="comment_list hide ds-thread" data-thread-key="{{ page.id }}" data-title="" data-url=""></div>

    <button data-id="{{ page.id }}" id="comment">Add Comments</button>
</div>
{% endblock %}

{% block script %}
{% if config.disqus %}
<script>
var c = {
    name: '{{ config.disqus }}',
    url: '//{{ config.disqus }}.disqus.com/embed.js'
}
</script>
{% endif %}
{% if config.duoshuo %}
<script>
var c = {
    name: '{{ config.duoshuo }}',
    url: '//static.duoshuo.com/embed.js'
}
</script>
{% endif %}
<script src="{{ url('js/comment.js') }}"></script>
{% endblock %}
